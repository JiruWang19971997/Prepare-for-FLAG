# sliding window
### 395. Longest Substring with At Least K Repeating Characters
- [ ] 重刷
```python
class Solution:
    def longestSubstring(self, s: str, k: int) -> int:
        if k == 0:
            return len(s)
        max_len = 0
        for uniq in range(1, len(set(s)) + 1):
            print('unique', uniq)
            max_len = max(max_len, self.get_longest(s, k, uniq))
        return max_len
                    
    def get_longest(self,s, k, unique = 1):
        
        max_long = 0
        left, right = 0, 0
        count = {}
        uniq_letter = 0
        valid_letter = 0
        while right < len(s):
            # print('right before', left, right)
            # 保证set(string)长度
            count[s[right]] = count.get(s[right], 0) + 1
            
            if count[s[right]] == 1:
                uniq_letter += 1
            # 记录string中每个字符出现次数
            if count[s[right]] == k:
                valid_letter += 1

            if valid_letter == unique and unique == uniq_letter: # 注意两个条件都要满足
                max_long = max(max_long, right - left + 1)
            while uniq_letter > unique and left < right:
                count[s[left]] -= 1
                # 更新set(string)长度
                if count[s[left]] == 0:
                    uniq_letter -= 1
                
                if count[s[left]] == k - 1:
                    valid_letter -= 1
                left += 1

            right += 1
        return max_long
```


# stack
